// src/components/SutraSection.jsx
import React, { useEffect, useMemo, useRef } from 'react';
import './SutraSection.css';

function clamp(v, min = 0, max = 1) {
  return Math.min(max, Math.max(min, v));
}

function easeOutCubic(t) {
  return 1 - Math.pow(1 - t, 3);
}

function SutraSection() {
  const wrapRef = useRef(null);
  const svgRef = useRef(null);

  const pathsRef = useRef([]);
  const lengthsRef = useRef([]);
  const rafRef = useRef(0);

  // 카드 ref 배열
  const cardRefs = useRef([]);

  // 알림 카드 데이터 (원하는 문구로 교체)
  const notifications = useMemo(
    () => [
      { title: '부처', desc: '평화는 안에서 시작된다' },
      { title: '관세음보살', desc: '자비는 먼저 듣는 마음이다' },
      { title: '지장보살', desc: '다짐은 어둠 속에서도 길을 만든다.' },
    ],
    []
  );

  useEffect(() => {
    const wrap = wrapRef.current;
    const svg = svgRef.current;
    if (!wrap || !svg) return;

    const prefersReduced = window.matchMedia?.(
      '(prefers-reduced-motion: reduce)'
    )?.matches;

    // 1) path 수집
    const paths = Array.from(svg.querySelectorAll('path.cls-1'));
    pathsRef.current = paths;

    // 2) 길이 캐싱 + 초기 세팅
    lengthsRef.current = paths.map((p) => {
      const len = p.getTotalLength();
      p.style.strokeDasharray = `${len}`;
      p.style.strokeDashoffset = prefersReduced ? '0' : `${len}`;
      p.style.strokeLinecap = 'round';
      p.style.strokeLinejoin = 'round';
      return len;
    });

    // 섹션 내부 스크롤 진행도 0~1
    const calcSectionProgress = () => {
      const rect = wrap.getBoundingClientRect();
      const vh = window.innerHeight;

      // 섹션이 뷰포트를 지나가는 동안의 "실제 스크롤 가능 거리"
      const total = rect.height - vh;

      if (total <= 0) return rect.top <= 0 ? 1 : 0;

      // rect.top이 0보다 작아질수록(위로 올라갈수록) 진행
      const passed = clamp(-rect.top, 0, total);

      return passed / total;
    };

    const applyProgress = (sectionProgress) => {
      const pathsNow = pathsRef.current;
      const lens = lengthsRef.current;

      // ===== Phase 1: SVG draw + opacity =====
      const svgPhaseEnd = 0.5; // 50%
      const svgProgress = clamp(sectionProgress / svgPhaseEnd);
      const easedSvg = prefersReduced ? 1 : easeOutCubic(svgProgress);

      // stroke draw
      for (let i = 0; i < pathsNow.length; i++) {
        const p = pathsNow[i];
        const len = lens[i];
        p.style.strokeDashoffset = `${len * (1 - easedSvg)}`;
      }

      // svg opacity 0.1 -> 1
      const minOpacity = 0.1;
      const svgOpacity = minOpacity + (1 - minOpacity) * easedSvg;
      svg.style.opacity = `${svgOpacity}`;

      // ===== Phase 2: Cards sequential enter =====
      const cardsStart = svgPhaseEnd;
      const cardsRange = 1 - cardsStart;
      const count = notifications.length || 1;
      const step = cardsRange / count;

      for (let i = 0; i < count; i++) {
        const el = cardRefs.current[i];
        if (!el) continue;

        const local = clamp((sectionProgress - cardsStart - i * step) / step);
        const easedLocal = prefersReduced ? 1 : easeOutCubic(local);

        // 아래에서 위로 살짝 올라오며 등장
        const translateY = 28 * (1 - easedLocal);

        el.style.opacity = `${easedLocal}`;
        el.style.transform = `translateY(${translateY}px)`;
      }
    };

    const update = () => {
      rafRef.current = 0;
      applyProgress(calcSectionProgress());
    };

    const onScrollOrResize = () => {
      if (rafRef.current) return;
      rafRef.current = window.requestAnimationFrame(update);
    };

    update();
    window.addEventListener('scroll', onScrollOrResize, { passive: true });
    window.addEventListener('resize', onScrollOrResize);

    return () => {
      window.removeEventListener('scroll', onScrollOrResize);
      window.removeEventListener('resize', onScrollOrResize);
      if (rafRef.current) cancelAnimationFrame(rafRef.current);
    };
  }, [notifications.length]);

  return (
    <section ref={wrapRef} className="sutra-section is-dark">
      {/* Sticky Stage */}
      <div className="sutra-stage">
        {/* Background SVG */}
        <svg ref={svgRef} className="sutra-svg" viewBox="0 0 870.96 833.24">
          <defs>
            <style>{`
              .cls-1 {
                fill: none;
                stroke: currentColor;
                stroke-width: 1.2;
                stroke-linejoin: round;
              }
            `}</style>
          </defs>

          <path
            className="cls-1"
            d="M247.48,419.23c-4.24,11.02,1.99,2.7,6.33-1.53-4.51,8.31,4.21,15.32,7.69,4.57,1.17,17.34-11.34,3.91-22.07,5.56-10.04-6.05,1.33,10.55-1.7,16.44.19-22.59-27.45-16.57-43.33-22.78-28.03,8.25-46.35-109.61-68.73-93.96,14.43-6.38,10.66-68.56-2.56-48.67-1.08,7.4-11.52.02-17,.17,8.36-12.19-2.9-43.82-6.49-13.38,7.79-10.96,4.99,6.74,3.33,11.99-2.55,22.71-26.15-22.99-45.73,33.23-6.23,10.86-.34,19.91,2.64,28.92-5-16.38-34.47-20.75-10.15-1.08,9.46,16.87,61.13-16.61,51.9,9.68,15.47-3.93,6.75-23.48,22.49-7.57-14.53,7.61,2.59,3.55,9.35-.02-24.88,7.24,36.7,109.39,19.48,91.58-11.96-17.41-35.48-122.86-50.64-74.26,3.09,3.07,24.51-12.48,13.25-3.29-13.04,12.53,29.96,107.27,51.72,98.98,19.53.49,32.49-15.93,23.64,6.47,7.88-3.88,4.14-16.08,14.02-11.56-5.58-.41-9.36,3.44-1.45,5.35,3.73,7.44,1.01,4.6,5.95-4.01,3.47,9.05,4.03,11.79,17.78,7.34.28-4.37,7.91,2.55,11.08-10.64.16,18.37-2.87,7.38,8.9,6.25,1.55,5.06,1,9.95,3.39,2.21,26.33,4.73-10.28,13.67-19.94,13.15,7.45,10.34,8.97,21.42,9.65,32.96,3.04-6,1.57-8.53,10.21-7.22,2.49-7.54,4.18-13.93,9.81-26.67-9.89,27.69,7.56,38.11-25.39,42.11-9.35.67,4.62,33.21,7.19,28.53,4.95-1.14,4.14-4.44-.39-3.24-2.12-6.28,11.6-2.66,13.07-.69-9.37,2.92,3.54,3.3,7.35,4.26-12.55-.12-5.43,10.28-14.99,10.67,9.69,6.42,3.33,15.99,4.83,20.13,3.64-.56,6.56,10.2,9.87,3.85,58.05-55.27-19.99,95.38,18.47,40.97,13.06,1.33-18.27,22.98-25.98,28.03-24.75,30.04,54.18-4.54,54.15-30.25-.06,22.25-10.52,34.88,18.88,35.72,3.25.05,3.15-1.73,2.34-5.22-1.38-16.96,19.79-22.8-6.9-26.83,6.62-3.56,19.28-8.33,6.46-.63,120.4,67.37-172.92,6.94-134.76,86.49-6.72-.66-7.78-8.23-11.21-10,12.86,38.58-4.3,2.16.75,25.88-3.98-3.97-12.45-13.43-9.81-3.21M493.63,450.39c4.17,18.04,3.66.52,2.18-7.41,8.34,25.22,31.54-4.49,34.28,12.99.2-32.65,18.69,17.03,9.79-18.35,31.17,57.89,95.96-58.06,77.99-84.31,5.84,3.03,10.65,8.38,18.25,7.83-12.02-11.09,13.64,2.77-6.61-11.91,23.99,10-3.86-6.86,9.87-7.26,21.64.34,42.74,16.71,56.79-7.96-5.85-1.8,6.13-17.47-11.89-4.27-100.13-174.1-85.55,163.98-182.7,83.36,15.75-14.98,23.51-12.4,16.01-30.96,18.69,16.64,7.55,10.3,14.74-1.12,2.01,2.59,10.31,5.7,6.47.25-6.69-5.17-.1-3.87,4.14-4.31,34.57-26.64,6.86-72.72-3.5-105.31-3.07-8.01-12.54,8.8-20.86,3.33,1.06,13.51-.36,3.06-1.16-3.45,10.03-.72,25.84-.8,22.74-14.58-9.39-16.24-2.48-46.83-25.46-53.02-13.48-30.32,15.8-85.94,2.04-115.7-13.38,14.45,1.53,145.7-31.8,99.24-7.1-20.8-31.65-41.01-58.62-45.14-9.62,13.5,58.56,25.82-22.11,27-31.7-1.65,6.83,13.11,19.43,10.27,55.69-14.34,25.49,19.14,43.25,19.03-9.71,10.88,78.01,115.01,46.52,138.75-59.58,105.16-136.91,12.18-108.85,33.73,7.34,7.24,5.99-21.92-.21-19.85,5.43-22.09,3.17-24.84,9.52-2.16-8.27-12.04,16.1-32.83,1.31-38.82-8.27,40.14,2.02-37.61-26.42-26.55,15.12-20.45-6.46,6.2-29.23-2.56-13.75-12-19.5-7,.08-.09-48.66-10.67-32.85,74.13-45.72,30.03-7.05,2.94-.27,6.42.21,10.17,1.77,9.34,5.45,32.6,8.91,12.07.3,10.09,5.9,18.33,9.48,27.26-8.78-27.43-16.26,13.22-7.05,8.37,3.73-8.31-.72-14.48,7.68-7.3,2.99,20.16,22.87,3.55,36.51,13.72-19.09-1.18-1.61,5.25,6.55-1.89,4.46-3.05,7.86,2.36,12.12-.45,10.5-3.36-23.98,13.49-31.74,5.98-.69,5.48,24.99,3.42,33.77-3.54-23.82,17.64-16.04,22.56-44.12,14.75,15.02,3.62-6.43-15.26-12.82-17.62-66.77,37.85-82.04,4.65-129.39-40.18-6.7-33.39,81.94-117.09,41.85-136.42,12.78,6.71,34.72,16.66,11.92.59,5.22-9.08,8.61-.16,18.21-.07-10.58-8.24-6.49-5.33-10.09-15.62-7.66-.81-9.6-9.21-12.61.77-34.76,41.27-20.38-26.34-22.38-56.46-18.11,8.22-2.37,51.01-8.03,70.65-16.75,10.46-29.17,31.43-26.13,53.57-18.23,9.47-.98,22.95,14.45,22.51-2.4,11.81-21.16-10.79-22.57,1.46-10.72,30.51-39.78,73.74-10.24,101.48,19.56,4.17,7.14,12.44,24.68-4.69-1.59,4.34-5.92,9.77,1.68,9.06-1.55,3.81-3.42,1.97-5.49,1.03-3.86-1.29-5.79,4.63-.51,4.19,4.95,5.83-10.29,15.42,8.62.49,1.13,4.54-2.68,9.86,3.47,12.51,25.36,34.36,39.01-4.04,22.27,25.8,4.05-.02,7.79-8.54,11.75-11.68-.05,3.5,2.24,4.09,5.29,3.79-1.63,2.28-2.61,5.31-3.57,1.45M680.52,483.88c0-29.16-23.81,41.99-23.94,15.81-16.82-47.45,33.56-7.14,14.14-38.36-2.11-8.46-9.08-2.74-14.31-1.15-13.29,1.36,16.38-21.32,23.25-16.28-2.51,6.3-1.08,8.42,5.1,10.06-11.08,8.79-4.98,5.39,4.45,7.55,14.97.61,5.44-7.07,9.15-16.34,39.85-10.06-1.36-5.53-12.17-12.43-4.34-6.56,9.27-26-4.1-23.25-1.79-11.33-14.81-14.2-22.86-21.02-32.61-57.82-4.07,38.69-17.37,63.43-33.62,3.22-92.24,28.16-135.23,17.27-21.89,9.79,16.48-9.67-26.7-7.56-12.72-2.68,7.65-2.68,3.07-16.79,5,26.86,1.6-8.2,10.64,5.63M555.89,698.52c11.62,11.13,10.34-4.77,3.77-11.74,13.42,2.26,22.73-20.14,29.37-5.67,3.61,4.8,6.65-1.8,6.63-5.43,12.62,3.58,17.36-8.64,18.62-18.23-8.96-14.52-2.34-6.7,9.23-3.24,2.85-4.21-9-9.71,1.35-8.31-2.13-7.92-4.76-8.63,4.83-9.05-23.34-19.06,18.42,3.97-3.95-14.71,18.31.98-9.42-11.36,14.25-11.66,7.17-3.36,20.35,11.89,21.57-.14,27.58,11.21,9.25-.01,24.06,33.13,8.29-1.53-4.44-21.93,3.59-4.83,7.42,12.7,5.05-3.63,1.25-9.65-.72-18.98,13.71,12.5,22.62,2.01,17.45,12.36-19.09-31.11-24.63-25.41-8.84-2.29-4.16-11.43-10.7-12.3-22.03-6.88,7.75,19.52-43.94,9.48-7.85-.44-7.86-.12-10.26,7.37-7.48,2.26,1.18-22.71-7.57-14.56-32.58,18.26-121.08-39.55-145.4-60.25-8.9-.61,14.59,1.85,13.57-9.59.56,18.45,113.61,54.6,127.3,49.44-3.3-5.08,3.6-4.47,4.17.89,2.26-8.14,2.41-9.78,5.81-2.17,12.73,14.48,71.02,15.48,23.03-1.69-2.29-5.57,39.05,12.74,46.18-16.74-6.81,23.2-47.63,34.67-.32,33.82-5.75-10.02-20.95-7.85,4.09-6.59,1.5-7.28-7.14-6.74-11.81-8.42,4.71-.34,21.37,1.12,13.97-5.3-24.31-4.65,24.44,1.03,7.19-11.74-10.23-3.82,2.35-7.48,9.85-6.48-4.36-11.02-20.92,7-23.78-4.84-17.2-37.78-40.26-4.07-60.32,5-30.73,4.08-210.57-82.12-136.55-47.68.95-36.92,17.74,46.2,135.93-23.22-20.26,5.57-39.95,14.57-60.51,18.17,14.96-13.94,51.68-7.37,57.62-29.27,5.21,9.24,1.06,10.08,8.81,4.58,5.52-1.75,2.47-5.84-2.43-4.71,17.48,2.94.59-10.4,9.63-16.94,2.42,7.24,17.85,100.56,22.58,64.37,2.45-20.07,25.94-20.67,29.56-44.7,9.75-6.51-18.92,2.73-4.34-5.68M332.86,277.36c.09-.58-.37-.45.08-.07,1.58,3.2,2.9,2.03-.08.07ZM412.91,270.83c3.84,2.34,1.56,5.37,1.46,8.41,2.98-10.69,9.22,5.69,1.63,8.9,10.31-3.69,6.25-15.29-3.03-17.27-4.55,14.16,1.29,10.32-.06-.04ZM164.37,659.64c9.1,5.56,4.12,4.14,6.79,11.13,3.02,7.66,15.34-1.49,5.28,8.84-3.91,2.55-8.31,11.44-.17,9.2,28.24-17.04,7.96-48.36,31.81-64.52,4.88-11.96,24.51-15.03,31.29-28.11,6.26-9.31,5.34-43.32-12.04-31.72-39.46,34.18-90.15,25.96-91.24,26.51.09,19.32,3.8,14.58-5.7,1.94.14,11.35.44,10.36-5.02.15,1.95,16.33-22.15-10.18-23.69.65,10.19,10.81-5.2,16.82-1.51,1.87-5.28,3.27-6.32,8.74-2.45,12.94-8.71,23.67,4.16,2.59,18.55,6.09-9.39.35-27.22,18.59-7.43,9.72-13.47,21.64,6.23-2.08-4.56,18.48,10.51-1.24,16.18-11.08,8.73,4.2,16.03-12.3,8.74,5.59,20.44,8.66-2.24,1.91-3.48,3.23-4.15,6.01,4.36,4.41,12.99-12.03,8.71-16.83.65-6.88,16.29-8.84,13.48-20.2,4.79,9.42-11.4,31.87,1.83,33.57,3.46-1.37,5.72-.69,5.76,3.63-7.5.31,6.8,14.88,5.31-2.21ZM117.35,572.51c1.33-6.08-20.11,1.89.11-.08-5.22,8.04-31.16,10.7-32.51-.34,30.45-.04,17.09-34.24,24.28-4.46,19.92-22.33,145.99,17.91,122.87-45.28-65.81-1.33-116.9,46.77-165.17-10.85-9.27-37.07-6.24-23.77,21.02-35.45,7.79-22.27,4.22-9.43,2.59,7.39,26.19-13.73,92.8,47.9,138.98,19,46.08-49.25-93.57-7.17-116.72-57.3-11.5-9.92-36.5-8.5-38.05-27.72-3.99-6.92-2.45,3.89-2.33,7.38-3.11-9.54-11.22,9.91-14.57-9.61-3.19-1.3-2.21,1.55-2.4,3.23-3.06-.56-4.41.84-4.39,4.02-2.46-3.83.86-4.54,3.4-6.66-26.27,1.31,9.4,17.11-16.06,27.57-3.51-5.15-30.89-16.87-22.09-6.61-8.2,10.43,9.77,9.63,16.78,11.53-3.64,2.94-4.12,4.9-1.46,6.88,2.48,1.84,1.41,2.89,0,4.57-6.95,9.97,15.58-1.07,13.69,7.48,17.76,41.91.82,18.7-25.98,5.75,1.06,26.42-6.76-.26-18.83,2.46,18.59,43.16,21.01-2.89,28.36,24.91,5.29,3.79,6.79-2.04.58-4.7,14.77,1.73,31.03-6.11,31.88,15.46,4.31,8.92-16.74,8.36-17.4-1.59-1.79-3.34-4.64-7.28-8.98-6.36,6.78,12.19.47,39.86,11.87,45.38,46.41-2.07,18.53,4.56,10.74,21.75,9.99-9.32,29.24-3.51,10.02,5.58,3.49-.29,10.17-4.72,8.35,2.25-3.64-.29-10.57,2.75-3.16,2.76,5.83-1.89,7.17,8.42,11.92,12.38,1.65-14.81,22.75-13.23,30.52-9.22,4.67-5.67,10.92-10.21,2.14-11.5ZM195.49,100.87c50.1-36.09,14.74,21.95,29.68,22.27,14.59,16.02,8.65-173.3-2.21-109.43-5.32,6.84,3.27,7.73,5.66,10.94-8.67-5.62-2.04,31.29-19.7,12.89-21.1-29.29,3.51,46.13-13.43,63.33ZM498.75,54.41c-.1-7.08,22.55,14.21,34.37,4.5,4.35-.35,11.63,3.45,12.99-3.82,2.35-13.76,2.85-32.19-13.99-37.09,18.88,19.46-9.26,44.49-3.27,19.84,2.23-15.34-4.34-37.12-12.15-10.25-4.27,5.38,6.07,18.17-5.95,17.29-15-6.91,18.52-41.11-5-22.23-5.39,7.52-13.5,27.98-5.62,33.76,4.33-1.23-.5-7.94-1.37-1.99ZM493.3,73.12c12.89,2.98,24.66,13.58,38.12,5.86,5.39-3.76,7.36,2.07,11.2,5.45,1.9-7.13-1.44-14-9.01-12.31-10.54,3.74-6.22-14.34-16.65-10.7-3.61,11.69-16.57.39-23.66,11.69ZM241.54,619.39c1.34-26.76-34.28,7.85-26.06,10.88,9.54-1.13,27.25,3.87,26.06-10.88ZM34.02,478.18c-9.12-8.17-13.64-28.12-23.56-32.08-10.28,15.77,10.79,26.18,23.56,32.08ZM313.74,256.57c-5.93,2.43-9.93,16.98-1.09,11.99,6.31-8.88,21.13-3.12,28.09-9.15-17.59-2.76-3.88-2.45,6.01-4.9-10.64-2.35-21.84,3.09-33.01,2.07ZM250,575.01c-.55-6.13-8.98-16.11-17.18-20.28,6.17,7.28,11.67,13.78,17.18,20.28ZM423.23,293.74c-17.49,6.39,6.22,2.36-7.37,7.83,5.1.28,4.41,13.81,7.37-7.83ZM523.57,87.24c1.67-3.47-10.32-5.13-11.72-2.58,1.58,3.57,8.26,1.48,11.72,2.58ZM98.17,585.94c6.5,2.21,12.76,4.94,18.77,8.25-.09-5.56-12.9-7.95-18.77-8.25ZM341.28,281.85c-2.59-3.96-5.12-7.82-7.79-11.89,1.59,4.73,2.99,9.29,7.79,11.89ZM349.12,380.64c-1.18-5.38-4.18-4.38-8.16-5.74.49,2.22,5.29,3.38,8.16,5.74ZM404.21,279.86q2.37-2.24,1.66-8.52c-.53,2.7-1.05,5.41-1.66,8.52ZM401.32,275.72c-.9-1.46-5.68,3.58-4.39,4.44,1.46-1.48,2.93-2.96,4.39-4.44Z"
          />
          <path
            className="cls-1"
            d="M83.64,466.09c-5.83-.53-6.66-6.59-11.01-8.45-4.52.09-5.73-.85-6.71-5.03-30.79-25.1-3.72,17.62,17.72,13.48Z"
          />
          <path
            className="cls-1"
            d="M615.46,332.47c12.67,8.95,21.78-10.85,27.34-19.81-9.39-2.49-20.92-6.48-23.7,6.31-1.77,7.36,7.61,1.19,10.5-.14,8.39.07-11.02,10.26-14.15,13.63Z"
          />
          <path
            className="cls-1"
            d="M401.39,246.47c-8.68,14.08-30.78-1.97-30.33,8.17-6.69-8.09-27.67,5.14-27.49-13.96-3.28,4.54-5.28,7.3-5.79.62-5.52,1.41.89,9.83,5.73,7.67-50.25,17.51-8.25-67.78,42.34-37.93,14.13,9.71,28.38,17.08,30.25,34.85,19.69,37.72-2.73,13.56-27.37,15.39-3.95-7.87,12.24-.14-.72-6.19,4.38-3.66,9.64-.45,14.27-1.72-1.72-7.33-.56-6.44,5.86-6.44-1.42-3.93-4.06-1.16-6.75-.47ZM347.41,241.43c2.19-10.37-17.47-3.93-6.38-11.84-19.97,12.78-2.64,5.4,6.38,11.84ZM392.1,222.38c4.49,4.3,5.77,9.39,9.96,13.59,1.71-7.18-1.12-11.32-9.96-13.59ZM399.53,239.56c.74-4.58-.97-6.81-6.75-8.03-2.49,5.9,2.9,5.99,6.75,8.03ZM329.85,229.74c3.25-2.56,5.57-9.06,12.39-9.21-5.17.59-14.13,2.38-12.39,9.21ZM369.67,224.47c-2.59-.51-5.11-1.01-7.61-1.5,1.36,3.42,4.33,3.98,7.61,1.5ZM362,240.79c4.13,2.16,7.72,1.73,11.68,0h-11.68Z"
          />
          <path
            className="cls-1"
            d="M649.45,444.82c10-6.23,19.84-10.12,31.18-11.12-13.11-3.85,1.53-24.15-11.59-30.3-35.25-32.03-17.38,15.7-19.59,41.42Z"
          />
          <path
            className="cls-1"
            d="M212.68,65.21c-3.21,6.9,3.96,21.49,10.14,9.34,7.1-14.44-10.63-34.97-10.14-9.34Z"
          />
          <path
            className="cls-1"
            d="M493.3,73.12c7.09-11.3,20.05,0,23.66-11.69,10.44-3.64,6.11,14.44,16.65,10.69,10.02-4.66,12.94,18.66,5.17,8.17-2.07-3.08-4.39-3.12-7.36-1.31-13.47,7.72-25.22-2.88-38.12-5.86ZM499.21,70.18c2.08,2.54,5.88,1.47,5.49-3"
          />
          <path
            className="cls-1"
            d="M241.54,619.39c1.56,14.28-20.04,11.8-28.59,9.57,5.12-9.5,27.44-33.06,28.59-9.57Z"
          />
          <path
            className="cls-1"
            d="M388.6,261.15c46.15,9.14,26.32,11.1-4.85,2.28-15.82-3.1-68.32,8.15-65.46,3.34,19.01,1.64,37.43-17.8,46.71-6.32.41-4.97,6.2-2.64,13.85-.14,2.04-5.81,7.63-1.75,9.76.85Z"
          />
          <path
            className="cls-1"
            d="M34.02,478.18c-12.76-5.88-33.85-16.32-23.57-32.07,9.81,3.82,14.58,24.03,23.57,32.07Z"
          />
          <path
            className="cls-1"
            d="M313.74,256.57c11.17,1.03,22.37-4.42,33.01-2.07-9.95,2.47-23.55,2.14-6.01,4.9-6.95,6.03-21.79.27-28.09,9.15-8.83,5-4.86-9.56,1.09-11.99ZM328.98,258.77c-6.51-2.25-13.52,0-15.09,3.75,4.5-1.12,9.38-2.33,15.09-3.75Z"
          />
          <path
            className="cls-1"
            d="M332.47,360.63c-9.66-4.96-1.15,2.41-9.33,10.66-5-11.26,2.13-30.64,9.33-10.66Z"
          />
          <path
            className="cls-1"
            d="M412.94,270.84c9.31,2.02,13.39,13.59,3.06,17.3,7.59-3.2,1.35-19.58-1.63-8.9.14-3.02,2.29-6.14-1.43-8.4Z"
          />
          <path
            className="cls-1"
            d="M423.23,293.74c-2.97,21.68-2.27,8.08-7.36,7.83,13.57-5.46-10.11-1.45,7.36-7.83Z"
          />
          <path
            className="cls-1"
            d="M523.57,87.24c-3.62-.32-7.25-.59-10.85-1.02-4.3-4.92,13.43-2.68,10.85,1.02Z"
          />
          <path
            className="cls-1"
            d="M98.17,585.94c5.86.3,18.7,2.7,18.78,8.25-6.02-3.31-12.27-6.04-18.78-8.25Z"
          />
          <path
            className="cls-1"
            d="M359.6,281.1c-7.55-.78-12.85-5.42-13.56-10.51,2.87,4.26,9.16,8.04,13.56,10.51Z"
          />
          <path
            className="cls-1"
            d="M341.28,281.85c-4.8-2.6-6.2-7.16-7.79-11.89,2.67,4.08,5.2,7.94,7.79,11.89Z"
          />
          <path
            className="cls-1"
            d="M349.12,380.64c-2.88-2.36-7.67-3.53-8.16-5.74,3.98,1.37,6.98.36,8.16,5.74Z"
          />
          <path
            className="cls-1"
            d="M635.09,354.3c5.36.52,5.01,2.78-.2,3.99.02-1.66.49-3.54.2-3.99Z"
          />
          <path
            className="cls-1"
            d="M404.21,279.86c.61-3.12,1.13-5.82,1.66-8.52q.71,6.28-1.66,8.52Z"
          />
          <path
            className="cls-1"
            d="M574.33,496.84c-2.68,3.33-8.44,3.06-12.31,4.88,4.12-1.54,8.05-3.8,12.31-4.88Z"
          />
          <path
            className="cls-1"
            d="M401.32,275.72c-1.58.89-3.49,5.13-5.01,3.83,1.58-.96,3.39-5.34,5.01-3.83Z"
          />
          <path
            className="cls-1"
            d="M332.86,277.37c.56.77,3.02,1.63,1.62,2.35-.57-.7-1.01-1.95-1.62-2.35Z"
          />
          <path
            className="cls-1"
            d="M332.94,277.3c-.2-.25-.4-.5-.09-.11,0-.72-.09.25.09.11Z"
          />
          <path
            className="cls-1"
            d="M403.71,631.34c-1.48,6.59-2.22-8.61-4.94-9.97-2.94,3.63-7.32-4.99-10.57-6.55,1.2,28.11-9.94-23.99,22.83-38.66-3.06,7.22,9.72,5.41,9.87-1.71,9.37-9.26,4.85,66.42,31.45,76.04-29.03-8.01-26.72,8.07-48.63-19.15Z"
          />
          <path
            class="cls-1"
            d="M308.54,611.86c12.93-24.64-5.28-63.68,15.19-75.93,10.16-8.96-13.42-29.97,4.47-16.1,20.33,8.21,8.74,5.11,5.33,23.66-2.2,5.95,20.53-.45,25.9-3.9-9.67,5.8-32.17,18.94-29.32,1.28-12.84,22.12-6.26,49.82-21.56,70.99Z"
          />
          <path
            className="cls-1"
            d="M82.36,324.6c-20.05,17.93-22.3,2.96-19.55-13.3,1.01,4.37,1.67,4.39,4.24.11,3.63,6.99,7.73,10.45,15.31,13.18Z"
          />
          <path
            className="cls-1"
            d="M233.61,236.55c-12.06.75-14.58,10.03-18.11,19.9-27.48,4.41,2.68-25.35,18.11-19.9Z"
          />
          <path
            className="cls-1"
            d="M313.63,632.19c-9.47-10.55,5.05-27.98,6.93-40.65-.06,12.79,2.71,31.1-6.93,40.65Z"
          />
          <path
            className="cls-1"
            d="M498.36,237.63c15.04-.73,45.47,22.34,16.79,19.68-3.29-.13-3.97-2.07-2.67-5.08,1.73-9.58-8.97-11.99-14.12-14.6Z"
          />
          <path
            className="cls-1"
            d="M599.73,340.3c37.49,11.65-8.7,63.8-18.13,90.97,8.54-28.91,46.77-65.67,18.13-90.97Z"
          />
          <path
            className="cls-1"
            d="M369.75,550.47c-5.7,9.18-55.94,26.92-38.89,12.93,13.4-2.67,26.97-6.93,38.89-12.93Z"
          />
          <path
            className="cls-1"
            d="M93.02,292.43c-2.69,5.38-3.85,31.84-9.63,18.43,6.01,2.6,6.41-9.69-1.97-6.47-11.53,18.35-4.14-24.18,11.6-11.96Z"
          />
          <path
            className="cls-1"
            d="M340.04,605.03c-4.68,4.32-19.24-20.42-14.44-31.05,1.92,11.97,8.57,19.88,14.44,31.05Z"
          />
          <path
            className="cls-1"
            d="M354.46,354.29c7.51,4.89,27.56-6.76,24.47,7.19-5.26-8.13-13.4-4.1-21.81-3.7,3.3,5.61,8.93,2.65,13.58,4.09-5.03,3.85-21.91.61-16.24-7.58Z"
          />
          <path
            className="cls-1"
            d="M333.38,372.65c-3.95,11.47-3.33,23.28-5.21,35.3-.68-11.21-5.74-28.33,5.21-35.3Z"
          />
          <path
            className="cls-1"
            d="M397.32,372.08c6.22,10.04,8.84,22.17,4.51,33.62.7-10.66-5.53-24.96-4.51-33.62Z"
          />
          <path
            className="cls-1"
            d="M373.6,346.03c-5.6,8.84-20.76,4.19-19.48-1.42,6.34,3.5,12.65,3.23,19.48,1.42Z"
          />
          <path
            className="cls-1"
            d="M327.41,562.15c.91-6.76,1.01-6.81,7.29-6.21,16.79.75.46,3.37-7.29,6.21Z"
          />
          <path
            className="cls-1"
            d="M356.41,321.59c-4.7-5.64-10.49-8.27-17.67-7.66,3.66-6.96,18.09.62,17.67,7.66Z"
          />
          <path
            className="cls-1"
            d="M369.83,550.56c1.18-8.05,1.71-6.97,11.56-7.45-3.36,3.64-6.87,7.04-11.56,7.45Z"
          />
          <path
            className="cls-1"
            d="M488.98,210.24c7.18,1.64,18.1-.91,21.61,2.96-7.68.14-14.85,2.19-21.61-2.96Z"
          />
          <path
            className="cls-1"
            d="M493.82,227.66c5.93,3.43,13.02.51,18.05,5.77-6.19-1.67-14.8,1.61-18.05-5.77Z"
          />
          <path
            className="cls-1"
            d="M331.73,323.65c7.44,1.66,16.27-.22,22.71,3.92-8.38,1.15-15.74-.24-22.71-3.92Z"
          />
          <path
            className="cls-1"
            d="M511.09,223.8c-6.39-.92-13.36.88-19.49-4.49,5.93,2.09,18.07-.11,19.49,4.49Z"
          />
          <path
            className="cls-1"
            d="M361.72,301.92c2.65-2.73,6.72-3.59,7.64.68-.92,4.76-7.71,3.93-7.64-.68Z"
          />
          <path
            className="cls-1"
            d="M398.24,323.69c-6.85,3.85-14.06,5.51-21.74,3.88-.42-1.62,17.54-1.82,21.74-3.88Z"
          />
          <path
            className="cls-1"
            d="M240.15,224.61c-5.22,3.04-14.11,6.72-17.96,2.69,6.36-.71,11.24-1.48,17.96-2.69Z"
          />
          <path
            className="cls-1"
            d="M226.71,206.61c4.83-.23,9.66-.47,14.56-.71-3.52,4.15-12.07,3.06-14.56.71Z"
          />
          <path
            className="cls-1"
            d="M224.59,217.01c3.94.62,10.47-1.24,13.12.71-3.66-.71-12.14,2.77-13.12-.71Z"
          />
          <path
            className="cls-1"
            d="M257.84,196.58c-6.97-.61-4.67-6.6,1.01-6.63-2.56,2.26-4.23,4.22-1.01,6.63Z"
          />
          <path
            className="cls-1"
            d="M83.64,466.09c-21.51,4.11-48.45-38.55-17.72-13.49.98,4.19,2.19,5.13,6.71,5.04,4.35,1.85,5.19,7.92,11.01,8.44Z"
          />
          <path
            className="cls-1"
            d="M164.46,659.58c-11.47-12.57-10.3-17.07,6.65-23.73-2.02,7.47-14.34,20.75,1.28,19.87,2.3-5.11,2.49-4.36,2.18.3,3.87,2.59,9.66,1.63,14.23,3.68-5.11,2.62-15.53-5.46-14.9,3.7-3.58-8.06-6.42-8.38-9.45-3.81Z"
          />
          <path
            className="cls-1"
            d="M392.1,222.38c8.85,2.27,11.68,6.41,9.96,13.59-4.19-4.2-5.47-9.29-9.96-13.59Z"
          />
          <path
            className="cls-1"
            d="M399.53,239.56c-3.85-2.04-9.24-2.13-6.75-8.03,5.78,1.22,7.49,3.45,6.75,8.03Z"
          />
          <path
            className="cls-1"
            d="M329.85,229.74c-1.73-6.83,7.21-8.62,12.39-9.21-6.83.15-9.14,6.65-12.39,9.21Z"
          />
          <path
            className="cls-1"
            d="M369.67,224.47c-3.28,2.48-6.25,1.93-7.61-1.5,2.5.49,5.03.99,7.61,1.5Z"
          />
          <path
            className="cls-1"
            d="M362,240.79h11.68c-3.96,1.73-7.55,2.16-11.68,0Z"
          />
          <path
            className="cls-1"
            d="M401.39,246.47c2.68-.7,5.34-3.47,6.75.47-2.22.68-4.77-.14-6.75-.47Z"
          />
          <path
            className="cls-1"
            d="M649.45,444.82c2.22-25.72-15.67-73.45,19.59-41.41,13.13,6.15-1.52,26.44,11.59,30.3-11.34,1-21.18,4.88-31.18,11.11Z"
          />
          <path
            class="cls-1"
            d="M212.68,65.21c-.49-25.64,17.25-5.08,10.13,9.34-6.17,12.14-13.34-2.44-10.13-9.34Z"
          />
          <path
            className="cls-1"
            d="M328.98,258.77c-5.71,1.42-10.59,2.63-15.09,3.75,1.57-3.75,8.58-5.99,15.09-3.75Z"
          />
        </svg>

        {/* Cards Overlay */}
        <div className="sutra-cards">
          <div className="sutra-cards__col">
            {notifications.map((n, i) => (
              <div
                key={`${n.title}-${i}`}
                ref={(el) => (cardRefs.current[i] = el)}
                className="sutra-card"
              >
                <div className="sutra-card__text">
                  <div className="sutra-card__title">{n.title}</div>
                  <div className="sutra-card__desc">{n.desc}</div>
                </div>
                <div className="sutra-card__thumb" />
              </div>
            ))}
          </div>
        </div>
      </div>
    </section>
  );
}

export default SutraSection;
